{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paska\\\\Documents\\\\FERI_2\\\\2semester\\\\RazvojAI\\\\Vaja3\\\\rain_v4_sample\\\\sp_v4_sample\\\\frontend\\\\src\\\\components\\\\PhotoDetail.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { UserContext } from '../userContext'; // Prepričaj se, da obstaja\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PhotoDetail() {\n  _s();\n  var _photo$postedBy;\n  const {\n    id\n  } = useParams();\n  const [photo, setPhoto] = useState(null);\n  const [comment, setComment] = useState('');\n  const [comments, setComments] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n  useEffect(() => {\n    const fetchPhoto = async () => {\n      const res = await fetch(`http://localhost:3001/photos/${id}`);\n      const data = await res.json();\n      setPhoto(data);\n    };\n    fetchPhoto();\n  }, [id]);\n  const handleCommentSubmit = async e => {\n    e.preventDefault();\n    if (!comment) return;\n    const res = await fetch(`http://localhost:3001/photos/${id}/comments`, {\n      method: 'POST',\n      credentials: 'include',\n      // če uporabljate seje/cookie\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        comment\n      })\n    });\n    if (res.ok) {\n      const data = await res.json();\n      // Posodobi lokalni seznam komentarjev, če endpoint vrne nov komentar\n      setComments(prev => [...prev, data]);\n      setComment('');\n    }\n  };\n  if (!photo) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Nalaganje...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: photo.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"http://localhost:3001/\" + photo.path,\n      alt: photo.name,\n      style: {\n        width: '300px',\n        height: '300px',\n        objectFit: 'cover'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: photo.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: [\"Avtor: \", ((_photo$postedBy = photo.postedBy) === null || _photo$postedBy === void 0 ? void 0 : _photo$postedBy.username) || \"Neznan\", \" | Objavljeno: \", photo.createdAt ? new Date(photo.createdAt).toLocaleString() : \"Ni podatka\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Komentarji\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), comments.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: comments.map((c, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [c.commentedBy, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 33\n          }, this), \" \", c.text]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ni komentarjev.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), user ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCommentSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          placeholder: \"Dodaj komentar...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Objavi komentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Prijavite se, da komentirate.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(PhotoDetail, \"X0kshU8aGGZ1a1JcyJVzcY8tay8=\", false, function () {\n  return [useParams];\n});\n_c = PhotoDetail;\nexport default PhotoDetail;\nvar _c;\n$RefreshReg$(_c, \"PhotoDetail\");","map":{"version":3,"names":["useState","useEffect","useContext","useParams","UserContext","jsxDEV","_jsxDEV","PhotoDetail","_s","_photo$postedBy","id","photo","setPhoto","comment","setComment","comments","setComments","user","fetchPhoto","res","fetch","data","json","handleCommentSubmit","e","preventDefault","method","credentials","headers","body","JSON","stringify","ok","prev","children","fileName","_jsxFileName","lineNumber","columnNumber","name","src","path","alt","style","width","height","objectFit","description","className","postedBy","username","createdAt","Date","toLocaleString","length","map","c","index","commentedBy","text","onSubmit","value","onChange","target","placeholder","type","_c","$RefreshReg$"],"sources":["C:/Users/paska/Documents/FERI_2/2semester/RazvojAI/Vaja3/rain_v4_sample/sp_v4_sample/frontend/src/components/PhotoDetail.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { UserContext } from '../userContext'; // Prepričaj se, da obstaja\r\n\r\nfunction PhotoDetail() {\r\n    const { id } = useParams();\r\n    const [photo, setPhoto] = useState(null);\r\n    const [comment, setComment] = useState('');\r\n    const [comments, setComments] = useState([]);\r\n    const { user } = useContext(UserContext);\r\n\r\n    useEffect(() => {\r\n        const fetchPhoto = async () => {\r\n            const res = await fetch(`http://localhost:3001/photos/${id}`);\r\n            const data = await res.json();\r\n            setPhoto(data);\r\n        };\r\n\r\n        fetchPhoto();\r\n    }, [id]);\r\n    \r\n    const handleCommentSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!comment) return;\r\n        const res = await fetch(`http://localhost:3001/photos/${id}/comments`, {\r\n            method: 'POST',\r\n            credentials: 'include', // če uporabljate seje/cookie\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ comment })\r\n        });\r\n        if (res.ok) {\r\n            const data = await res.json();\r\n            // Posodobi lokalni seznam komentarjev, če endpoint vrne nov komentar\r\n            setComments(prev => [...prev, data]);\r\n            setComment('');\r\n        }\r\n    };\r\n\r\n    if (!photo) {\r\n        return <div>Nalaganje...</div>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>{photo.name}</h2>\r\n            <img \r\n                src={\"http://localhost:3001/\" + photo.path} \r\n                alt={photo.name} \r\n                style={{ width: '300px', height: '300px', objectFit: 'cover' }} \r\n            />\r\n            <p>{photo.description}</p>\r\n            <p className=\"text-muted\">\r\n                Avtor: {photo.postedBy?.username || \"Neznan\"} | Objavljeno: {photo.createdAt ? new Date(photo.createdAt).toLocaleString() : \"Ni podatka\"}\r\n            </p>\r\n            \r\n            {/* Oddelek za komentarje */}\r\n            <div>\r\n                <h3>Komentarji</h3>\r\n                {comments.length > 0 ? (\r\n                    <ul>\r\n                        {comments.map((c, index) => (\r\n                            <li key={index}>\r\n                                <strong>{c.commentedBy}:</strong> {c.text}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                ) : (\r\n                    <p>Ni komentarjev.</p>\r\n                )}\r\n                {user ? (\r\n                    <form onSubmit={handleCommentSubmit}>\r\n                        <textarea \r\n                            value={comment}\r\n                            onChange={(e) => setComment(e.target.value)}\r\n                            placeholder=\"Dodaj komentar...\"\r\n                        />\r\n                        <button type=\"submit\">Objavi komentar</button>\r\n                    </form>\r\n                ) : (\r\n                    <p>Prijavite se, da komentirate.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PhotoDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}