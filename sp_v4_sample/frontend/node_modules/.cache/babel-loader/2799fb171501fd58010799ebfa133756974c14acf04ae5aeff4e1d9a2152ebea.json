{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\paska\\\\Documents\\\\FERI_2\\\\2semester\\\\RazvojAI\\\\Vaja3\\\\rain_v4_sample\\\\sp_v4_sample\\\\frontend\\\\src\\\\components\\\\PhotoDetail.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PhotoDetail() {\n  _s();\n  var _photo$postedBy;\n  const {\n    id\n  } = useParams();\n  const [photo, setPhoto] = useState(null);\n  const [comment, setComment] = useState('');\n  const [comments, setComments] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n  useEffect(() => {\n    const fetchPhoto = async () => {\n      const res = await fetch(`http://localhost:3001/photos/${id}`);\n      const data = await res.json();\n      setPhoto(data);\n    };\n    fetchPhoto();\n  }, [id]);\n  useEffect(() => {\n    const fetchComments = async () => {\n      const res = await fetch(`http://localhost:3001/photos/${id}/comments`);\n      const data = await res.json();\n      setComments(data);\n    };\n    fetchComments();\n  }, [id]);\n  const handleCommentSubmit = async e => {\n    e.preventDefault();\n    if (!comment) return;\n    const res = await fetch(`http://localhost:3001/photos/${id}/comments`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        comment\n      })\n    });\n    if (res.ok) {\n      const data = await res.json();\n      setComments(prev => [...prev, data]);\n      setComment('');\n    }\n  };\n  const handleVote = async voteType => {\n    const res = await fetch(`http://localhost:3001/photos/${id}/vote`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        voteType\n      })\n    });\n    if (res.ok) {\n      const updatedPhoto = await res.json();\n      setPhoto(updatedPhoto);\n    }\n  };\n  if (!photo) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Nalaganje...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"photo-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: photo.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"http://localhost:3001/\" + photo.path,\n      alt: photo.name,\n      className: \"photo-detail-img\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: photo.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: [\"Avtor: \", ((_photo$postedBy = photo.postedBy) === null || _photo$postedBy === void 0 ? void 0 : _photo$postedBy.username) || \"Neznan\", \" | Objavljeno: \", photo.createdAt ? new Date(photo.createdAt).toLocaleString() : \"Ni podatka\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vote-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleVote(\"like\"),\n        className: \"like-button\",\n        children: [\"\\uD83D\\uDC4D \", photo.likes ? photo.likes.length : 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleVote(\"dislike\"),\n        className: \"dislike-button\",\n        children: [\"\\uD83D\\uDC4E \", photo.dislikes ? photo.dislikes.length : 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comments-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Komentarji\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), comments.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: comments.map((c, index) => {\n          var _c$commentedBy;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [((_c$commentedBy = c.commentedBy) === null || _c$commentedBy === void 0 ? void 0 : _c$commentedBy.username) || \"Neznan\", \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 33\n            }, this), \" \", c.text]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ni komentarjev.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this), user ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCommentSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          placeholder: \"Dodaj komentar...\",\n          className: \"comment-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"comment-button\",\n          children: \"Objavi komentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Prijavite se, da komentirate.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n_s(PhotoDetail, \"veFxECSQOyf+lVMKroqCDe+pURA=\", true);\n_c = PhotoDetail;\nexport default PhotoDetail;\nvar _c;\n$RefreshReg$(_c, \"PhotoDetail\");","map":{"version":3,"names":["PhotoDetail","_s","_photo$postedBy","id","useParams","photo","setPhoto","useState","comment","setComment","comments","setComments","user","useContext","UserContext","useEffect","fetchPhoto","res","fetch","data","json","fetchComments","handleCommentSubmit","e","preventDefault","method","credentials","headers","body","JSON","stringify","ok","prev","handleVote","voteType","updatedPhoto","_jsxDEV","children","fileName","_jsxFileName","lineNumber","columnNumber","className","name","src","path","alt","description","postedBy","username","createdAt","Date","toLocaleString","onClick","likes","length","dislikes","map","c","index","_c$commentedBy","commentedBy","text","onSubmit","value","onChange","target","placeholder","type","_c","$RefreshReg$"],"sources":["C:/Users/paska/Documents/FERI_2/2semester/RazvojAI/Vaja3/rain_v4_sample/sp_v4_sample/frontend/src/components/PhotoDetail.js"],"sourcesContent":["function PhotoDetail() {\r\n    const { id } = useParams();\r\n    const [photo, setPhoto] = useState(null);\r\n    const [comment, setComment] = useState('');\r\n    const [comments, setComments] = useState([]);\r\n    const { user } = useContext(UserContext);\r\n\r\n    useEffect(() => {\r\n        const fetchPhoto = async () => {\r\n            const res = await fetch(`http://localhost:3001/photos/${id}`);\r\n            const data = await res.json();\r\n            setPhoto(data);\r\n        };\r\n\r\n        fetchPhoto();\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        const fetchComments = async () => {\r\n            const res = await fetch(`http://localhost:3001/photos/${id}/comments`);\r\n            const data = await res.json();\r\n            setComments(data);\r\n        };\r\n\r\n        fetchComments();\r\n    }, [id]);\r\n\r\n    const handleCommentSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!comment) return;\r\n        const res = await fetch(`http://localhost:3001/photos/${id}/comments`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ comment })\r\n        });\r\n        if (res.ok) {\r\n            const data = await res.json();\r\n            setComments(prev => [...prev, data]);\r\n            setComment('');\r\n        }\r\n    };\r\n\r\n    const handleVote = async (voteType) => {\r\n        const res = await fetch(`http://localhost:3001/photos/${id}/vote`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ voteType })\r\n        });\r\n        if (res.ok) {\r\n            const updatedPhoto = await res.json();\r\n            setPhoto(updatedPhoto);\r\n        }\r\n    };\r\n\r\n    if (!photo) {\r\n        return <div>Nalaganje...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"photo-detail\">\r\n            <h2>{photo.name}</h2>\r\n            <img \r\n                src={\"http://localhost:3001/\" + photo.path} \r\n                alt={photo.name} \r\n                className=\"photo-detail-img\"\r\n            />\r\n            <p>{photo.description}</p>\r\n            <p className=\"text-muted\">\r\n                Avtor: {photo.postedBy?.username || \"Neznan\"} | Objavljeno: {photo.createdAt ? new Date(photo.createdAt).toLocaleString() : \"Ni podatka\"}\r\n            </p>\r\n\r\n            <div className=\"vote-section\">\r\n                <button onClick={() => handleVote(\"like\")} className=\"like-button\">\r\n                    👍 {photo.likes ? photo.likes.length : 0}\r\n                </button>\r\n                <button onClick={() => handleVote(\"dislike\")} className=\"dislike-button\">\r\n                    👎 {photo.dislikes ? photo.dislikes.length : 0}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"comments-section\">\r\n                <h3>Komentarji</h3>\r\n                {comments.length > 0 ? (\r\n                    <ul>\r\n                        {comments.map((c, index) => (\r\n                            <li key={index}>\r\n                                <strong>{c.commentedBy?.username || \"Neznan\"}:</strong> {c.text}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                ) : (\r\n                    <p>Ni komentarjev.</p>\r\n                )}\r\n                {user ? (\r\n                    <form onSubmit={handleCommentSubmit}>\r\n                        <textarea \r\n                            value={comment}\r\n                            onChange={(e) => setComment(e.target.value)}\r\n                            placeholder=\"Dodaj komentar...\"\r\n                            className=\"comment-input\"\r\n                        />\r\n                        <button type=\"submit\" className=\"comment-button\">Objavi komentar</button>\r\n                    </form>\r\n                ) : (\r\n                    <p>Prijavite se, da komentirate.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PhotoDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}